<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Safe Taxi</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background-color:#f2f7fb; color:#333; }
  header { background-color:#007bff; color:white; text-align:center; padding:2rem 1rem; }
  header h1 { font-size:2.5rem; margin-bottom:0.5rem; }
  main { max-width:1100px; margin:2rem auto; padding:0 1rem; }
  section { background-color:white; border-radius:12px; padding:2rem; margin-bottom:2rem; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
  section h2 { color:#007bff; margin-bottom:1rem; }
  p, li { font-size:1.1rem; }
  ul { padding-left:1.5rem; }
  #map { width:100%; height:350px; border-radius:12px; margin-bottom:1rem; }
  button { background-color:#dc3545; color:white; padding:0.8rem 1.2rem; border:none; border-radius:8px; cursor:pointer; margin-top:5px; margin-right:5px; }
  button:hover { background-color:#c82333; }
  iframe { width:100%; max-width:850px; height:450px; border-radius:12px; border:2px solid #007bff; }
  /* Calendario estilo Health and Safety */
  #calendarContainer { margin-top:1rem; border:1px solid #ccc; border-radius:12px; overflow:hidden; }
  #calendarHeader { display:flex; justify-content:space-between; align-items:center; background:#007bff; color:white; padding:10px 15px; font-weight:bold; border-bottom:1px solid #ccc; }
  #calendarHeader button { background:white; color:#007bff; border-radius:6px; padding:5px 10px; font-weight:bold; cursor:pointer; }
  #calendarTable { width:100%; border-collapse:collapse; }
  #calendarTable th, #calendarTable td { width:14.28%; text-align:center; padding:10px; border:1px solid #ddd; }
  #calendarTable th { background:#e6f0ff; }
  #calendarTable td:hover { background:#d0e4ff; cursor:pointer; border-radius:50%; }
  #calendarTable td.selected { background:#007bff; color:white; border-radius:50%; }
  #taxiInfo { background:#f1f1f1; padding:15px; border-radius:8px; margin-top:1rem; }
  #taxiInfo h3 { margin-top:0; }
  #pickupForm input, #pickupForm button { padding:0.5rem; margin:0.2rem; border-radius:6px; border:1px solid #ccc; }
  #pickupForm button { border:none; background-color:#28a745; color:white; cursor:pointer; }
  #pickupForm button:hover { background-color:#218838; }
  #pickupList { margin-top:10px; }
  #pickupList li { margin-bottom:5px; }
  #google_translate_element { margin-top:1rem; }
</style>
</head>
<body>

<header>
  <h1>Safe Taxi</h1>
  <p>Real-time tracking, emergency alerts, and secure rides for women and children.</p>
</header>

<main>
  <!-- Map Section -->
  <section id="mapSection">
    <h2>Live Map</h2>
    <div id="map"></div>
    <p>Track your ride in real-time and let your assigned driver locate you safely.</p>
  </section>

  <!-- Drivers Section -->
  <section id="drivers">
    <h2>Available Taxi Drivers</h2>
    <ul>
      <li><b>John Doe:</b> <a href="tel:+18091234567">Call</a></li>
      <li><b>Maria Lopez:</b> <a href="tel:+18099876543">Call</a></li>
      <li><b>David Johnson:</b> <a href="tel:+18093456789">Call</a></li>
    </ul>
  </section>

  <!-- Emergency Section -->
  <section id="emergencySection">
    <h2>Emergency</h2>
    <p>If you feel unsafe, press the button below to activate the alarm and alert authorities.</p>
    <button id="emergencyBtn">Activate Emergency Alert</button>
    <audio id="alarm" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg"></audio>
  </section>

  <!-- Pickup Calendar Section -->
  <section id="pickupCalendar">
    <h2>Programar tu Pickup</h2>
    <div id="calendarContainer">
      <div id="calendarHeader">
        <button id="prevMonth">«</button>
        <span id="monthYear"></span>
        <button id="nextMonth">»</button>
      </div>
      <table id="calendarTable">
        <thead>
          <tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="taxiInfo">
      <h3>Información de los taxistas</h3>
      <p>Los taxistas trabajan en turnos de 8 horas, tienen formación en atención al cliente y carisma para un viaje seguro y agradable. Siempre se aseguran de que los pasajeros se sientan cómodos y protegidos.</p>
      <button id="boardBtn">Aborde</button>
      <button id="disembarkBtn">Desaborde</button>
      <p id="boardTime"></p>
      <p id="disembarkTime"></p>
    </div>

    <div id="addPickup">
      <h3>Agregar Pickup</h3>
      <form id="pickupForm">
        <input type="text" id="pickupName" placeholder="Tu nombre" required />
        <input type="time" id="pickupTime" required />
        <button type="submit">Agregar</button>
      </form>
      <ul id="pickupList"></ul>
    </div>
  </section>
<!-- Full Information Section -->
<section id="infoSection">
  <h2>How to Use Safe Taxi</h2>
  <p>Safe Taxi is designed to provide a safe, reliable, and convenient ride for women and children. Below is a detailed guide on how to use each feature of the website:</p>

  <h3>1. Using the Website</h3>
  <p>Register with your name and contact information. Once registered, you can request a taxi, track your ride in real-time, and communicate with verified drivers.</p>

  <h3>2. Emergency Situations</h3>
  <p>If you feel unsafe at any point during your ride or waiting for a taxi, press the <b>"Activate Emergency Alert"</b> button. This triggers an audible alarm and notifies nearby authorities for immediate assistance.</p>

  <h3>3. Using the Calendar</h3>
  <p>The calendar allows you to schedule your taxi pickups. Click on a date, choose a time, and add your name. You can see all scheduled pickups in the list below the form.</p>

  <h3>4. Driver Information</h3>
  <p>Our taxi drivers are verified professionals. They work regular hours, are courteous and friendly, and are trained to prioritize passenger safety. Use the <b>Board</b> button to mark the start of your ride and the <b>Disembark</b> button to mark the end; the time is recorded automatically.</p>

  <h3>5. Chat Bot</h3>
  <p>The AI Safety Assistant can answer questions, provide guidance, and give safety tips. Type your question into the chat box and get immediate responses to help you feel secure.</p>

  <h3>6. Map</h3>
  <p>The real-time map shows your current location and allows the driver to find you quickly. You can monitor your route and ensure your safety at all times.</p>

  <h3>7. Purpose of Safe Taxi</h3>
  <p>Safe Taxi was created to restore confidence, safety, and peace of mind to women and children when using taxi services, minimizing the risk of harassment or unsafe situations.</p>
</section>
  <!-- Chatbot Section -->
  <section id="chatbot-container">
    <h2>AI Safety Assistant</h2>
    <iframe src="https://claribelgilsosa23-your-safe-taxi.hf.space" frameborder="0"></iframe>
  </section>

  <!-- Google Translate -->
  <div id="google_translate_element"></div>

</main>

<footer>
  <p>© 2025 Safe Taxi — Developed to protect what matters most</p>
  <p>Created by <a href="https://github.com/Claribel-Gilsosa" target="_blank">Claribel Gil Sosa</a></p>
</footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
// Map
const map = L.map('map').setView([18.5,-69.9],8);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:18, attribution:'&copy; OpenStreetMap contributors'}).addTo(map);
if(navigator.geolocation){
  navigator.geolocation.watchPosition(
    (pos)=>{ const lat=pos.coords.latitude; const lon=pos.coords.longitude; L.marker([lat,lon]).addTo(map).bindPopup('📍 Tu ubicación actual').openPopup(); map.setView([lat,lon],13); },
    ()=>{ alert("Unable to get your current location."); }
  );
} else { alert("Geolocation not supported."); }

// Emergency
const alarm=document.getElementById("alarm");
document.getElementById("emergencyBtn").addEventListener("click",()=>{ alarm.play(); alert("Alerta de emergencia activada!"); });

// Calendar logic
const calendarBody = document.querySelector("#calendarTable tbody");
const monthYear = document.getElementById("monthYear");
const prevMonthBtn = document.getElementById("prevMonth");
const nextMonthBtn = document.getElementById("nextMonth");
let today = new Date(), currentMonth = today.getMonth(), currentYear = today.getFullYear();
let selectedCell = null;

function renderCalendar(month, year){
  calendarBody.innerHTML="";
  monthYear.textContent = `${year}-${month+1}`;
  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month+1, 0).getDate();
  let row = document.createElement("tr");
  for(let i=0;i<firstDay;i++) row.appendChild(document.createElement("td"));
  for(let d=1; d<=daysInMonth; d++){
    if(row.children.length===7){ calendarBody.appendChild(row); row=document.createElement("tr"); }
    const cell = document.createElement("td");
    cell.textContent = d;
    cell.addEventListener("click",()=> {
      if(selectedCell) selectedCell.classList.remove("selected");
      cell.classList.add("selected");
      selectedCell = cell;
    });
    row.appendChild(cell);
  }
  calendarBody.appendChild(row);
}

prevMonthBtn.addEventListener("click",()=>{ currentMonth--; if(currentMonth<0){currentMonth=11; currentYear--; } renderCalendar(currentMonth,currentYear); });
nextMonthBtn.addEventListener("click",()=>{ currentMonth++; if(currentMonth>11){currentMonth=0; currentYear++; } renderCalendar(currentMonth,currentYear); });
renderCalendar(currentMonth,currentYear);

// Pickup Form
const pickupForm=document.getElementById("pickupForm");
const pickupList=document.getElementById("pickupList");
pickupForm.addEventListener("submit",e=>{
  e.preventDefault();
  const name=document.getElementById("pickupName").value;
  const time=document.getElementById("pickupTime").value;
  const li=document.createElement("li");
  li.textContent=`${name} - ${time}`;
  pickupList.appendChild(li);
  pickupForm.reset();
});

// Board/Disembark buttons
document.getElementById("boardBtn").addEventListener("click",()=> {
  const now = new Date();
  document.getElementById("boardTime").textContent = `Hora de abordaje: ${now.toLocaleTimeString()}`;
});
document.getElementById("disembarkBtn").addEventListener("click",()=> {
  const now = new Date();
  document.getElementById("disembarkTime").textContent = `Hora de desaborde: ${now.toLocaleTimeString()}`;
});
</script>

<script type="text/javascript">
function googleTranslateElementInit